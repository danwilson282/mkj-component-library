import{r as l,i as $}from"./iframe-D8dPSlhY.js";import{$ as h,a as w}from"./useEffectEvent-jkaMIIQr.js";const y=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},v=e=>e&&"window"in e&&e.window===e?e:y(e).defaultView||window;function x(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function L(e){return x(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let T=!1,g=!1;function D(){return T}function u(){return g}function j(e,t){if(!u())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:L(n)?n=n.host:n=n.parentNode}return!1}const C=(e=document)=>{var t;if(!u())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function I(e){return u()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}const F=typeof Element<"u"&&"checkVisibility"in Element.prototype;function M(e){const t=v(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:a}=e.style,r=n!=="none"&&a!=="hidden"&&a!=="collapse";if(r){const{getComputedStyle:d}=e.ownerDocument.defaultView;let{display:i,visibility:s}=d(e);r=i!=="none"&&s!=="hidden"&&s!=="collapse"}return r}function S(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function f(e,t){return F?e.checkVisibility({visibilityProperty:!0})&&!e.closest("[data-react-aria-prevent-focus]"):e.nodeName!=="#comment"&&M(e)&&S(e,t)&&(!e.parentElement||f(e.parentElement,e))}const b=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])',"permission"],A=b.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";b.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const N=b.join(':not([hidden]):not([tabindex="-1"]),');function O(e){return e.matches(A)&&f(e)&&!m(e)}function B(e){return e.matches(N)&&f(e)&&!m(e)}function m(e){let t=e;for(;t!=null;){if(t instanceof t.ownerDocument.defaultView.HTMLElement&&t.inert)return!0;t=t.parentElement}return!1}function P(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function H(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function _(e){let t=l.useRef({isFocused:!1,observer:null});h(()=>{const a=t.current;return()=>{a.observer&&(a.observer.disconnect(),a.observer=null)}},[]);let n=w(a=>{e?.(a)});return l.useCallback(a=>{if(a.target instanceof HTMLButtonElement||a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=a.target,d=i=>{if(t.current.isFocused=!1,r.disabled){let s=P(i);n(s)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",d,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var i;(i=t.current.observer)===null||i===void 0||i.disconnect();let s=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let p=!1;function k(e){for(;e&&!O(e);)e=e.parentElement;let t=v(e),n=t.document.activeElement;if(!n||n===e)return;p=!0;let a=!1,r=o=>{(o.target===n||a)&&o.stopImmediatePropagation()},d=o=>{(o.target===n||a)&&(o.stopImmediatePropagation(),!e&&!a&&(a=!0,$(n),c()))},i=o=>{(o.target===e||a)&&o.stopImmediatePropagation()},s=o=>{(o.target===e||a)&&(o.stopImmediatePropagation(),a||(a=!0,$(n),c()))};t.addEventListener("blur",r,!0),t.addEventListener("focusout",d,!0),t.addEventListener("focusin",s,!0),t.addEventListener("focus",i,!0);let c=()=>{cancelAnimationFrame(E),t.removeEventListener("blur",r,!0),t.removeEventListener("focusout",d,!0),t.removeEventListener("focusin",s,!0),t.removeEventListener("focus",i,!0),p=!1,a=!1},E=requestAnimationFrame(c);return c}export{C as $,y as a,_ as b,I as c,v as d,p as e,j as f,H as g,P as h,k as i,u as j,B as k,O as l,D as m};
