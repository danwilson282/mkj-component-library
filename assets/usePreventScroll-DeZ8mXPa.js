import{$ as w}from"./chain-Cz8Y3ew1.js";import{$ as S}from"./useEffectEvent-jkaMIIQr.js";import{$ as y}from"./getScrollParent-BL0kfGii.js";import{$ as x}from"./isScrollable-BSEN4xi5.js";import{k as T}from"./iframe-D8dPSlhY.js";import{a as p}from"./keyboard-B0W89dhJ.js";const u=typeof document<"u"&&window.visualViewport;let s=0,v;function B(e={}){let{isDisabled:t}=e;S(()=>{if(!t)return s++,s===1&&(T()?v=H():v=M()),()=>{s--,s===0&&v()}},[t])}function M(){let e=window.innerWidth-document.documentElement.clientWidth;return w(e>0&&("scrollbarGutter"in document.documentElement.style?b(document.documentElement,"scrollbarGutter","stable"):b(document.documentElement,"paddingRight",`${e}px`)),b(document.documentElement,"overflow","hidden"))}function H(){let e,t=!1,l=n=>{let c=n.target;e=x(c)?c:y(c,!0),t=!1;let r=c.ownerDocument.defaultView.getSelection();r&&!r.isCollapsed&&r.containsNode(c,!0)&&(t=!0),"selectionStart"in c&&"selectionEnd"in c&&c.selectionStart<c.selectionEnd&&c.ownerDocument.activeElement===c&&(t=!0)},o=document.createElement("style");o.textContent=`
@layer {
  * {
    overscroll-behavior: contain;
  }
}`.trim(),document.head.prepend(o);let i=n=>{if(!(n.touches.length===2||t)){if(!e||e===document.documentElement||e===document.body){n.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&n.preventDefault()}},d=n=>{let c=n.target,r=n.relatedTarget;if(r&&p(r))r.focus({preventScroll:!0}),E(r,p(c));else if(!r){var f;let $=(f=c.parentElement)===null||f===void 0?void 0:f.closest("[tabindex]");$?.focus({preventScroll:!0})}},a=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(n){let c=document.activeElement!=null&&p(document.activeElement);a.call(this,{...n,preventScroll:!0}),(!n||!n.preventScroll)&&E(this,c)};let m=w(h(document,"touchstart",l,{passive:!1,capture:!0}),h(document,"touchmove",i,{passive:!1,capture:!0}),h(document,"blur",d,!0));return()=>{m(),o.remove(),HTMLElement.prototype.focus=a}}function b(e,t,l){let o=e.style[t];return e.style[t]=l,()=>{e.style[t]=o}}function h(e,t,l,o){return e.addEventListener(t,l,o),()=>{e.removeEventListener(t,l,o)}}function E(e,t){t||!u?g(e):u.addEventListener("resize",()=>g(e),{once:!0})}function g(e){let t=document.scrollingElement||document.documentElement,l=e;for(;l&&l!==t;){let o=y(l);if(o!==document.documentElement&&o!==document.body&&o!==l){let i=o.getBoundingClientRect(),d=l.getBoundingClientRect();if(d.top<i.top||d.bottom>i.top+l.clientHeight){let a=i.bottom;u&&(a=Math.min(a,u.offsetTop+u.height));let m=d.top-i.top-((a-i.top)/2-d.height/2);o.scrollTo({top:Math.max(0,Math.min(o.scrollHeight-o.clientHeight,o.scrollTop+m)),behavior:"smooth"})}}l=o.parentElement}}export{B as $};
