import{r as n}from"./iframe-D8dPSlhY.js";import{u as E}from"./index-Ca3nUzO9.js";function I(){const t=()=>()=>{};return n.useSyncExternalStore(t,()=>!0,()=>!1)}function x(t={}){const{onLoad:s,onError:o,ignoreFallback:g,src:u,crossOrigin:a,srcSet:i,sizes:l,loading:c,shouldBypassImageLoad:m=!1}=t,d=I(),e=n.useRef(d?new Image:null),[y,f]=n.useState("pending");n.useEffect(()=>{e.current&&(e.current.onload=r=>{p(),f("loaded"),s?.(r)},e.current.onerror=r=>{p(),f("failed"),o?.(r)})},[e.current]);const p=()=>{e.current&&(e.current.onload=null,e.current.onerror=null,e.current=null)},S=n.useCallback(()=>{if(!u)return"pending";if(g||m)return"loaded";const r=new Image;return r.src=u,a&&(r.crossOrigin=a),i&&(r.srcset=i),l&&(r.sizes=l),c&&(r.loading=c),e.current=r,r.complete&&r.naturalWidth?"loaded":"loading"},[u,a,i,l,s,o,c,m]);return E(()=>{d&&f(S())},[d,S]),g?"loaded":y}export{x as u};
