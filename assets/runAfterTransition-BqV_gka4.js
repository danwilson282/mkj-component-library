let r=new Map,a=new Set;function o(){if(typeof window>"u")return;function t(e){return"propertyName"in e}let d=e=>{if(!t(e)||!e.target)return;let n=r.get(e.target);n||(n=new Set,r.set(e.target,n),e.target.addEventListener("transitioncancel",i,{once:!0})),n.add(e.propertyName)},i=e=>{if(!t(e)||!e.target)return;let n=r.get(e.target);if(n&&(n.delete(e.propertyName),n.size===0&&(e.target.removeEventListener("transitioncancel",i),r.delete(e.target)),r.size===0)){for(let s of a)s();a.clear()}};document.body.addEventListener("transitionrun",d),document.body.addEventListener("transitionend",i)}typeof document<"u"&&(document.readyState!=="loading"?o():document.addEventListener("DOMContentLoaded",o));function c(){for(const[t]of r)"isConnected"in t&&!t.isConnected&&r.delete(t)}function f(t){requestAnimationFrame(()=>{c(),r.size===0?t():a.add(t)})}export{f as $};
