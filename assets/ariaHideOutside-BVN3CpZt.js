import{d as g}from"./utils-U1MD0fLI.js";const F=typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype;let d=new WeakMap,i=[];function w(s,u){let c=g(s?.[0]),l=u instanceof c.Element?{root:u}:u;var p;let v=(p=l?.root)!==null&&p!==void 0?p:document.body,b=l?.shouldUseInert&&F,o=new Set(s),a=new Set,$=e=>b&&e instanceof c.HTMLElement?e.inert:e.getAttribute("aria-hidden")==="true",h=(e,t)=>{b&&e instanceof c.HTMLElement?e.inert=t:t?e.setAttribute("aria-hidden","true"):(e.removeAttribute("aria-hidden"),e instanceof c.HTMLElement&&(e.inert=!1))},T=e=>{for(let n of e.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))o.add(n);let t=n=>{if(a.has(n)||o.has(n)||n.parentElement&&a.has(n.parentElement)&&n.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let m of o)if(n.contains(m))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t}),N=t(e);if(N===NodeFilter.FILTER_ACCEPT&&L(e),N!==NodeFilter.FILTER_REJECT){let n=r.nextNode();for(;n!=null;)L(n),n=r.nextNode()}},L=e=>{var t;let r=(t=d.get(e))!==null&&t!==void 0?t:0;$(e)&&r===0||(r===0&&h(e,!0),a.add(e),d.set(e,r+1))};i.length&&i[i.length-1].disconnect(),T(v);let f=new MutationObserver(e=>{for(let t of e)if(t.type==="childList"&&![...o,...a].some(r=>r.contains(t.target)))for(let r of t.addedNodes)(r instanceof HTMLElement||r instanceof SVGElement)&&(r.dataset.liveAnnouncer==="true"||r.dataset.reactAriaTopLayer==="true")?o.add(r):r instanceof Element&&T(r)});f.observe(v,{childList:!0,subtree:!0});let E={visibleNodes:o,hiddenNodes:a,observe(){f.observe(v,{childList:!0,subtree:!0})},disconnect(){f.disconnect()}};return i.push(E),()=>{f.disconnect();for(let e of a){let t=d.get(e);t!=null&&(t===1?(h(e,!1),d.delete(e)):d.set(e,t-1))}E===i[i.length-1]?(i.pop(),i.length&&i[i.length-1].observe()):i.splice(i.indexOf(E),1)}}export{w as $};
