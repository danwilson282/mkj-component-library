import{a as s,$ as o}from"./useEffectEvent-jkaMIIQr.js";import{r as c,m as i}from"./iframe-D8dPSlhY.js";function $(f){let[e,u]=c.useState(f),t=c.useRef(null),r=s(()=>{if(!t.current)return;let n=t.current.next();if(n.done){t.current=null;return}e===n.value?r():u(n.value)});o(()=>{t.current&&r()});let d=s(n=>{t.current=n(e),r()});return[e,d]}let b=!!(typeof window<"u"&&window.document&&window.document.createElement),l=new Map,a;typeof FinalizationRegistry<"u"&&(a=new FinalizationRegistry(f=>{l.delete(f)}));function p(f){let[e,u]=c.useState(f),t=c.useRef(null),r=i(e),d=c.useRef(null);if(a&&a.register(d,r),b){const n=l.get(r);n&&!n.includes(t)?n.push(t):l.set(r,[t])}return o(()=>{let n=r;return()=>{a&&a.unregister(d),l.delete(n)}},[r]),c.useEffect(()=>{let n=t.current;return n&&u(n),()=>{n&&(t.current=null)}}),r}function w(f,e){if(f===e)return f;let u=l.get(f);if(u)return u.forEach(r=>r.current=e),e;let t=l.get(e);return t?(t.forEach(r=>r.current=f),f):e}function g(f=[]){let e=p(),[u,t]=$(e),r=c.useCallback(()=>{t(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,t]);return o(r,[e,r,...f]),u}export{w as $,p as a,g as b};
